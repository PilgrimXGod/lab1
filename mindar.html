<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-aframe.prod.js"></script>
    <style>
        body { margin: 0; }
        .example-container { overflow: hidden; position: absolute; width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div class="example-container">
        <!-- Сцена MindAR. imageTargetSrc вказує на скомпільований маркер -->
        <a-scene mindar-aframe="imageTargetSrc: ./assets/targets.mind;"
                 color-space="sRGB" 
                 renderer="colorManagement: true, physicallyCorrectLights" 
                 vr-mode-ui="enabled: false" 
                 device-orientation-permission-ui="enabled: false">
            
            <!-- Елементи інтерфейсу для сканування -->
            <div id="scanning" class="mindar-ui-overlay">
                <div class="scanning-inner">
                    <div class="scanning-line"></div>
                </div>
            </div>

            <!-- Асети -->
            <a-assets>
                <img id="sandstone" src="./assets/sandstone.jpg">
            </a-assets>

            <!-- Камера -->
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

            <!-- Цільовий маркер (перший у файлі .mind, тому targetIndex="0") -->
            <a-entity mindar-aframe-target="targetIndex: 0">
                <!-- Наша модель пірамід. Знову масштабуємо та обертаємо -->
                <a-entity id="pyramid-complex" position="0 0 0" scale="0.1 0.1 0.1" rotation="0 0 0">
                
                    <!-- Піраміда Хеопса (1) -->
                    <a-entity id="khufu-pyramid" position="2.5 0 -3.5">
                        <a-cone src="#sandstone" height="1.45" radius-bottom="1.15" segments-radial="4" position="0 0.725 0"></a-cone>
                        <a-cone color="gold" height="0.15" radius-bottom="0.115" segments-radial="4" position="0 1.375 0"></a-cone>
                    </a-entity>

                    <!-- Піраміда Хефрена (2) -->
                    <a-entity id="khafre-pyramid" position="0 0 0">
                        <a-cone src="#sandstone" height="1.35" radius-bottom="1.05" segments-radial="4" position="0 0.675 0"></a-cone>
                        <a-cone color="gold" height="0.135" radius-bottom="0.105" segments-radial="4" position="0 1.2825 0"></a-cone>
                    </a-entity>

                    <!-- Піраміда Мікеріна (3) -->
                    <a-entity id="menkaure-pyramid" position="-2 0 4">
                        <a-cone src="#sandstone" height="0.65" radius-bottom="0.5" segments-radial="4" position="0 0.325 0"></a-cone>
                        <a-cone color="gold" height="0.065" radius-bottom="0.05" segments-radial="4" position="0 0.6175 0"></a-cone>
                    </a-entity>

                </a-entity>
            </a-entity>
        </a-scene>
    </div>

    <script>
        // JS для запуску сцени після завантаження
        document.addEventListener('DOMContentLoaded', () => {
            const sceneEl = document.querySelector('a-scene');
            sceneEl.addEventListener('arReady', () => {
                // Тут можна додати логіку, яка виконується, коли AR готовий
            });
        });
    </script>
</body>
</html>
